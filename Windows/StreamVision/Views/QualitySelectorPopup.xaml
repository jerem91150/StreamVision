<UserControl x:Class="StreamVision.Views.QualitySelectorPopup"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="200">

    <Border Background="#F0181818" CornerRadius="8" Padding="8" BorderBrush="#333" BorderThickness="1">
        <Border.Effect>
            <DropShadowEffect BlurRadius="10" ShadowDepth="2" Opacity="0.5"/>
        </Border.Effect>

        <StackPanel>
            <!-- Header -->
            <TextBlock Text="Qualité" FontSize="12" FontWeight="SemiBold" Foreground="#888" Margin="8,0,0,8"/>

            <!-- Quality Options -->
            <ItemsControl x:Name="QualityItems">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button Click="QualityOption_Click" Tag="{Binding}"
                                Background="Transparent" BorderThickness="0" Cursor="Hand"
                                HorizontalContentAlignment="Stretch" Padding="8,6">
                            <Button.Template>
                                <ControlTemplate TargetType="Button">
                                    <Border x:Name="border" Background="{TemplateBinding Background}"
                                            CornerRadius="4" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter/>
                                    </Border>
                                    <ControlTemplate.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter TargetName="border" Property="Background" Value="#30FFFFFF"/>
                                        </Trigger>
                                    </ControlTemplate.Triggers>
                                </ControlTemplate>
                            </Button.Template>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Orientation="Horizontal">
                                    <!-- Check mark for current -->
                                    <TextBlock x:Name="CheckMark" Text="✓" Foreground="#60A5FA" FontSize="12"
                                               Margin="0,0,8,0" VerticalAlignment="Center"
                                               Visibility="{Binding IsSelected, Converter={StaticResource BoolToVis}}"/>

                                    <TextBlock Text="{Binding Label}" Foreground="White" FontSize="13"
                                               VerticalAlignment="Center"/>
                                </StackPanel>

                                <!-- Bitrate info -->
                                <TextBlock Grid.Column="1" Text="{Binding BitrateDisplay}" Foreground="#666"
                                           FontSize="11" VerticalAlignment="Center"/>
                            </Grid>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- Separator -->
            <Border Height="1" Background="#333" Margin="0,8"/>

            <!-- Auto option -->
            <Button x:Name="AutoButton" Click="AutoOption_Click"
                    Background="Transparent" BorderThickness="0" Cursor="Hand"
                    HorizontalContentAlignment="Stretch" Padding="8,6">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="4" Padding="{TemplateBinding Padding}">
                            <ContentPresenter/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#30FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
                <StackPanel Orientation="Horizontal">
                    <TextBlock x:Name="AutoCheck" Text="✓" Foreground="#60A5FA" FontSize="12"
                               Margin="0,0,8,0" VerticalAlignment="Center" Visibility="Collapsed"/>
                    <TextBlock Text="Auto" Foreground="White" FontSize="13" VerticalAlignment="Center"/>
                    <TextBlock x:Name="AutoDetail" Text=" (recommandé)" Foreground="#666" FontSize="11"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Button>
        </StackPanel>
    </Border>
</UserControl>
