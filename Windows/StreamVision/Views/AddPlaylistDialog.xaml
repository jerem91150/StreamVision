<Window x:Class="StreamVision.Views.AddPlaylistDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Ajouter une playlist"
        Height="600" Width="650"
        WindowStartupLocation="CenterOwner"
        Background="{StaticResource BackgroundBrush}"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True">

    <Border Background="{StaticResource SurfaceBrush}"
            CornerRadius="16"
            BorderBrush="{StaticResource CardBrush}"
            BorderThickness="1">
        <Grid Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <Grid Grid.Row="0" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Ajouter une playlist IPTV"
                               FontSize="24"
                               FontWeight="Bold"
                               Foreground="{StaticResource TextPrimaryBrush}"/>
                    <TextBlock Text="Entrez les informations de votre fournisseur IPTV"
                               FontSize="13"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               Margin="0,4,0,0"/>
                </StackPanel>
                <Button Content="âœ•"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Top"
                        Style="{StaticResource IconButton}"
                        Click="Cancel_Click"/>
            </Grid>

            <!-- Help Text based on type -->
            <Border x:Name="HelpBorder" Grid.Row="1" Background="#20FFFFFF" CornerRadius="8" Padding="12" Margin="0,0,0,16">
                <TextBlock x:Name="HelpText" FontSize="12" Foreground="#AAA" TextWrapping="Wrap"
                           Text="Collez l'URL de votre fichier M3U ou M3U8. Exemple: http://exemple.com/playlist.m3u8"/>
            </Border>

            <!-- Playlist Type Selection -->
            <StackPanel Grid.Row="2" Margin="0,0,0,20">
                <TextBlock Text="Type de source"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontSize="15"
                           Margin="0,0,0,12"/>
                <StackPanel Orientation="Horizontal">
                    <RadioButton x:Name="M3URadio"
                                 Content="M3U / M3U8"
                                 IsChecked="True"
                                 GroupName="PlaylistType"
                                 Foreground="{StaticResource TextPrimaryBrush}"
                                 FontSize="15"
                                 Margin="0,0,30,0"
                                 Checked="PlaylistType_Changed"/>
                    <RadioButton x:Name="XtreamRadio"
                                 Content="Xtream Codes"
                                 GroupName="PlaylistType"
                                 Foreground="{StaticResource TextPrimaryBrush}"
                                 FontSize="15"
                                 Margin="0,0,30,0"
                                 Checked="PlaylistType_Changed"/>
                    <RadioButton x:Name="StalkerRadio"
                                 Content="Stalker Portal"
                                 GroupName="PlaylistType"
                                 Foreground="{StaticResource TextPrimaryBrush}"
                                 FontSize="15"
                                 Checked="PlaylistType_Changed"/>
                </StackPanel>
            </StackPanel>

            <!-- Form Fields -->
            <StackPanel Grid.Row="3">
                <!-- Playlist Name -->
                <TextBlock Text="Nom de la playlist"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontSize="13"
                           Margin="0,0,0,5"/>
                <TextBox x:Name="NameTextBox"
                         Style="{StaticResource ModernTextBox}"
                         Margin="0,0,0,12"/>

                <!-- URL -->
                <TextBlock x:Name="UrlLabel"
                           Text="URL du serveur"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontSize="13"
                           Margin="0,0,0,5"/>
                <TextBox x:Name="UrlTextBox"
                         Style="{StaticResource ModernTextBox}"
                         Margin="0,0,0,12"
                         AcceptsReturn="False"
                         IsUndoEnabled="True">
                    <TextBox.InputBindings>
                        <KeyBinding Key="V" Modifiers="Control" Command="ApplicationCommands.Paste"/>
                        <KeyBinding Key="C" Modifiers="Control" Command="ApplicationCommands.Copy"/>
                        <KeyBinding Key="X" Modifiers="Control" Command="ApplicationCommands.Cut"/>
                        <KeyBinding Key="A" Modifiers="Control" Command="ApplicationCommands.SelectAll"/>
                    </TextBox.InputBindings>
                </TextBox>

                <!-- Username (for Xtream) -->
                <StackPanel x:Name="UsernamePanel" Visibility="Collapsed">
                    <TextBlock Text="Nom d'utilisateur"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="13"
                               Margin="0,0,0,5"/>
                    <TextBox x:Name="UsernameTextBox"
                             Style="{StaticResource ModernTextBox}"
                             Margin="0,0,0,12"/>
                </StackPanel>

                <!-- Password (for Xtream) -->
                <StackPanel x:Name="PasswordPanel" Visibility="Collapsed">
                    <TextBlock Text="Mot de passe"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="13"
                               Margin="0,0,0,5"/>
                    <PasswordBox x:Name="PasswordBox"
                                 Background="{StaticResource CardBrush}"
                                 Foreground="{StaticResource TextPrimaryBrush}"
                                 BorderThickness="1"
                                 BorderBrush="{StaticResource SurfaceBrush}"
                                 Padding="12,10"
                                 FontSize="14"
                                 Margin="0,0,0,12"/>
                </StackPanel>

                <!-- MAC Address (for Stalker) -->
                <StackPanel x:Name="MacPanel" Visibility="Collapsed">
                    <TextBlock Text="Adresse MAC"
                               Foreground="{StaticResource TextSecondaryBrush}"
                               FontSize="13"
                               Margin="0,0,0,5"/>
                    <TextBox x:Name="MacTextBox"
                             Style="{StaticResource ModernTextBox}"
                             Margin="0,0,0,12"/>
                </StackPanel>

                <!-- EPG URL (Optional) -->
                <TextBlock Text="URL du guide TV (optionnel)"
                           Foreground="{StaticResource TextSecondaryBrush}"
                           FontSize="13"
                           Margin="0,0,0,5"/>
                <TextBox x:Name="EpgTextBox"
                         Style="{StaticResource ModernTextBox}"/>
            </StackPanel>

            <!-- Buttons -->
            <StackPanel Grid.Row="4"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,30,0,0">
                <Button Content="Annuler"
                        Style="{StaticResource IconButton}"
                        Width="140"
                        Height="50"
                        FontSize="16"
                        Click="Cancel_Click"/>
                <Button Content="Ajouter"
                        Style="{StaticResource PrimaryButton}"
                        Width="160"
                        Height="50"
                        FontSize="16"
                        Margin="15,0,0,0"
                        Click="Add_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
