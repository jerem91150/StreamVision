<Window x:Class="StreamVision.Views.MediaDetailWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:StreamVision"
        Title="Details"
        Height="800" Width="1100"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <Window.Resources>
        <!-- Badge Style -->
        <Style x:Key="BadgeStyle" TargetType="Border">
            <Setter Property="Background" Value="#27272A"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="Margin" Value="0,0,8,8"/>
        </Style>

        <!-- Language Badge Style -->
        <Style x:Key="LanguageBadge" TargetType="Border">
            <Setter Property="Background" Value="#1E3A5F"/>
            <Setter Property="CornerRadius" Value="6"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Margin" Value="0,0,8,8"/>
        </Style>

        <!-- Rating Star Style -->
        <Style x:Key="RatingStar" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Width" Value="36"/>
            <Setter Property="Height" Value="36"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <TextBlock x:Name="star" Text="â˜†" FontSize="28" Foreground="#3F3F46"
                                   HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="star" Property="Foreground" Value="#FBBF24"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Section Title Style -->
        <Style x:Key="SectionTitle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#A1A1AA"/>
            <Setter Property="Margin" Value="0,0,0,12"/>
        </Style>

        <!-- Action Button Style -->
        <Style x:Key="ActionButton" TargetType="Button">
            <Setter Property="Background" Value="#60A5FA"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="32,14"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="10" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#3B82F6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Secondary Button Style -->
        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Background" Value="#27272A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="24,14"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" Background="{TemplateBinding Background}"
                                CornerRadius="10" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#3F3F46"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- Main Container -->
    <Border CornerRadius="20" Background="#09090B" BorderBrush="#27272A" BorderThickness="1">
        <Grid>
            <!-- Background Backdrop with blur effect -->
            <Border CornerRadius="20" Opacity="0.15">
                <Border.Background>
                    <ImageBrush x:Name="BackdropBrush" Stretch="UniformToFill"/>
                </Border.Background>
            </Border>

            <!-- Gradient overlay -->
            <Border CornerRadius="20">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                        <GradientStop Color="#00090909" Offset="0"/>
                        <GradientStop Color="#FF09090B" Offset="0.4"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- Header with close button -->
                <Grid Grid.Row="0" Margin="24,16">
                    <Button HorizontalAlignment="Right" Click="Close_Click"
                            Background="Transparent" BorderThickness="0" Cursor="Hand"
                            Width="40" Height="40">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border x:Name="border" Background="#27272A" CornerRadius="20"
                                        Width="40" Height="40">
                                    <TextBlock Text="âœ•" FontSize="14" Foreground="#A1A1AA"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter TargetName="border" Property="Background" Value="#3F3F46"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>

                <!-- Content -->
                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="48,0,48,48">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="300"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Left Column: Poster + Rating -->
                        <StackPanel Grid.Column="0">
                            <!-- Poster -->
                            <Border CornerRadius="16" Height="450" Width="300" ClipToBounds="True">
                                <Border.Background>
                                    <ImageBrush x:Name="PosterBrush" Stretch="UniformToFill"/>
                                </Border.Background>
                                <Border.Effect>
                                    <DropShadowEffect Color="Black" BlurRadius="30" ShadowDepth="0" Opacity="0.6"/>
                                </Border.Effect>
                                <!-- Fallback if no poster -->
                                <Border Background="#18181B" CornerRadius="16">
                                    <TextBlock Text="ðŸŽ¬" FontSize="64" Foreground="#3F3F46"
                                               HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </Border>

                            <!-- User Rating Section -->
                            <Border Background="#18181B" CornerRadius="16" Padding="20" Margin="0,24,0,0">
                                <StackPanel>
                                    <TextBlock Text="VOTRE NOTE" Style="{StaticResource SectionTitle}"/>

                                    <!-- Star Rating -->
                                    <StackPanel x:Name="StarRatingPanel" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,8,0,16">
                                        <Button x:Name="Star1" Style="{StaticResource RatingStar}" Click="Star_Click" Tag="1"/>
                                        <Button x:Name="Star2" Style="{StaticResource RatingStar}" Click="Star_Click" Tag="2"/>
                                        <Button x:Name="Star3" Style="{StaticResource RatingStar}" Click="Star_Click" Tag="3"/>
                                        <Button x:Name="Star4" Style="{StaticResource RatingStar}" Click="Star_Click" Tag="4"/>
                                        <Button x:Name="Star5" Style="{StaticResource RatingStar}" Click="Star_Click" Tag="5"/>
                                    </StackPanel>

                                    <TextBlock x:Name="RatingText" Text="Cliquez pour noter"
                                               FontSize="13" Foreground="#71717A" HorizontalAlignment="Center"/>

                                    <!-- Quality Rating -->
                                    <Border Background="#27272A" CornerRadius="10" Padding="16" Margin="0,16,0,0">
                                        <StackPanel>
                                            <TextBlock Text="QualitÃ© technique" FontSize="12" Foreground="#A1A1AA" Margin="0,0,0,8"/>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                                <Button x:Name="QualityBad" Click="Quality_Click" Tag="bad" Margin="4,0"
                                                        Style="{StaticResource SecondaryButton}" Padding="12,8">
                                                    <TextBlock Text="ðŸ‘Ž" FontSize="16"/>
                                                </Button>
                                                <Button x:Name="QualityGood" Click="Quality_Click" Tag="good" Margin="4,0"
                                                        Style="{StaticResource SecondaryButton}" Padding="12,8">
                                                    <TextBlock Text="ðŸ‘" FontSize="16"/>
                                                </Button>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <!-- Right Column: Info -->
                        <StackPanel Grid.Column="1" Margin="40,0,0,0">
                            <!-- Version Badges (VOSTFR, VF, etc.) -->
                            <WrapPanel x:Name="VersionBadgesPanel" Margin="0,0,0,16">
                                <!-- Filled dynamically -->
                            </WrapPanel>

                            <!-- Title -->
                            <TextBlock x:Name="TitleText" FontSize="36" FontWeight="Bold"
                                       Foreground="#FAFAFA" TextWrapping="Wrap" Margin="0,0,0,8"/>

                            <!-- Original Title (if different) -->
                            <TextBlock x:Name="OriginalTitleText" FontSize="15" Foreground="#71717A"
                                       Margin="0,0,0,16" Visibility="Collapsed"/>

                            <!-- Meta Info Row -->
                            <WrapPanel Margin="0,0,0,20">
                                <!-- Year -->
                                <Border Style="{StaticResource BadgeStyle}">
                                    <TextBlock x:Name="YearText" FontSize="13" Foreground="#FAFAFA"/>
                                </Border>

                                <!-- Duration -->
                                <Border x:Name="DurationBadge" Style="{StaticResource BadgeStyle}" Visibility="Collapsed">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸ• " FontSize="12"/>
                                        <TextBlock x:Name="DurationText" FontSize="13" Foreground="#FAFAFA"/>
                                    </StackPanel>
                                </Border>

                                <!-- TMDb Rating -->
                                <Border x:Name="TmdbRatingBadge" Style="{StaticResource BadgeStyle}" Visibility="Collapsed">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="â­ " FontSize="12"/>
                                        <TextBlock x:Name="TmdbRatingText" FontSize="13" Foreground="#FBBF24"/>
                                    </StackPanel>
                                </Border>

                                <!-- Category -->
                                <Border x:Name="CategoryBadge" Style="{StaticResource BadgeStyle}">
                                    <TextBlock x:Name="CategoryText" FontSize="13" Foreground="#FAFAFA"/>
                                </Border>
                            </WrapPanel>

                            <!-- Genres -->
                            <WrapPanel x:Name="GenresPanel" Margin="0,0,0,24">
                                <!-- Filled dynamically -->
                            </WrapPanel>

                            <!-- Action Buttons -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,32">
                                <Button Style="{StaticResource ActionButton}" Click="Play_Click">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="â–¶" FontSize="14" Margin="0,0,10,0"/>
                                        <TextBlock Text="Lecture"/>
                                    </StackPanel>
                                </Button>

                                <Button x:Name="FavoriteButton" Style="{StaticResource SecondaryButton}"
                                        Click="AddToList_Click" Margin="12,0,0,0">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock x:Name="FavoriteIcon" Text="â™¡" FontSize="16" Margin="0,0,8,0"/>
                                        <TextBlock x:Name="FavoriteText" Text="Favoris"/>
                                    </StackPanel>
                                </Button>

                                <Button x:Name="TrailerButton" Style="{StaticResource SecondaryButton}"
                                        Click="Trailer_Click" Margin="12,0,0,0" Visibility="Collapsed">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="ðŸŽ¬" FontSize="14" Margin="0,0,8,0"/>
                                        <TextBlock Text="Bande-annonce"/>
                                    </StackPanel>
                                </Button>
                            </StackPanel>

                            <!-- Synopsis -->
                            <Border Background="#18181B" CornerRadius="16" Padding="24" Margin="0,0,0,24">
                                <StackPanel>
                                    <TextBlock Text="SYNOPSIS" Style="{StaticResource SectionTitle}"/>
                                    <TextBlock x:Name="OverviewText" FontSize="15" Foreground="#D4D4D8"
                                               TextWrapping="Wrap" LineHeight="24"/>
                                </StackPanel>
                            </Border>

                            <!-- Audio & Subtitles Section -->
                            <Border Background="#18181B" CornerRadius="16" Padding="24" Margin="0,0,0,24">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Audio Languages -->
                                    <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                        <TextBlock Text="AUDIO" Style="{StaticResource SectionTitle}"/>
                                        <WrapPanel x:Name="AudioLanguagesPanel">
                                            <!-- Filled dynamically -->
                                        </WrapPanel>
                                    </StackPanel>

                                    <!-- Subtitles -->
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="SOUS-TITRES" Style="{StaticResource SectionTitle}"/>
                                        <WrapPanel x:Name="SubtitlesPanel">
                                            <!-- Filled dynamically -->
                                        </WrapPanel>
                                    </StackPanel>
                                </Grid>
                            </Border>

                            <!-- Cast & Crew -->
                            <Border x:Name="CastSection" Background="#18181B" CornerRadius="16" Padding="24"
                                    Margin="0,0,0,24" Visibility="Collapsed">
                                <StackPanel>
                                    <TextBlock Text="CASTING" Style="{StaticResource SectionTitle}"/>
                                    <TextBlock x:Name="CastText" FontSize="14" Foreground="#D4D4D8"
                                               TextWrapping="Wrap" LineHeight="22"/>

                                    <TextBlock x:Name="DirectorLabel" Text="RÃ‰ALISATION"
                                               Style="{StaticResource SectionTitle}" Margin="0,20,0,12" Visibility="Collapsed"/>
                                    <TextBlock x:Name="DirectorText" FontSize="14" Foreground="#D4D4D8"
                                               Visibility="Collapsed"/>
                                </StackPanel>
                            </Border>

                            <!-- Technical Info -->
                            <Border Background="#18181B" CornerRadius="16" Padding="24">
                                <StackPanel>
                                    <TextBlock Text="INFORMATIONS TECHNIQUES" Style="{StaticResource SectionTitle}"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition/>
                                            <RowDefinition/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Column="0" Grid.Row="0" Margin="0,0,0,12">
                                            <TextBlock Text="Type" FontSize="12" Foreground="#71717A"/>
                                            <TextBlock x:Name="MediaTypeText" FontSize="14" Foreground="#FAFAFA"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Grid.Row="0" Margin="0,0,0,12">
                                            <TextBlock Text="Source" FontSize="12" Foreground="#71717A"/>
                                            <TextBlock x:Name="SourceText" FontSize="14" Foreground="#FAFAFA"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="0" Grid.Row="1">
                                            <TextBlock Text="Groupe" FontSize="12" Foreground="#71717A"/>
                                            <TextBlock x:Name="GroupText" FontSize="14" Foreground="#FAFAFA"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1" Grid.Row="1">
                                            <TextBlock Text="Version dÃ©tectÃ©e" FontSize="12" Foreground="#71717A"/>
                                            <TextBlock x:Name="DetectedVersionText" FontSize="14" Foreground="#60A5FA"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </ScrollViewer>
            </Grid>
        </Grid>
    </Border>
</Window>
